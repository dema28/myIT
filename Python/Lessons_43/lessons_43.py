"""00. - –ó–∞–¥–∞–Ω–∏–µ Search
üìå –ó–∞–¥–∞–Ω–∏–µ: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∞–π—Ç–µ
üîπ –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:
–ù–∞–ø–∏—Å–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Selenium (Python), –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä–∏—Ç
—Ä–∞–±–æ—Ç—É –ø–æ–∏—Å–∫–∞ –Ω–∞ —Å–∞–π—Ç–µ Datart.cz.
–¢–µ—Å—Ç –¥–æ–ª–∂–µ–Ω —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ—Å–ª–µ –≤–≤–æ–¥–∞ –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ –≤ –ø–æ–∏—Å–∫, –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ—è–≤—è—Ç—Å—è
—Ç–æ–≤–∞—Ä—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ —ç—Ç–æ —Å–ª–æ–≤–æ –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–∏.
üìù –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ç–µ—Å—Ç—É:
‚úÖ 1. –û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç Datart.cz
‚úÖ 2. –ü—Ä–∏–Ω—è—Ç—å –∫—É–∫–∏ (–µ—Å–ª–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ)
‚úÖ 3. –ù–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É –ø–æ–∏—Å–∫–∞ –∏ –≤–≤–µ—Å—Ç–∏ —Ç—É–¥–∞ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "iPhone")
‚úÖ 4. –ù–∞–∂–∞—Ç—å Enter, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–∏—Å–∫
‚úÖ 5. –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (—É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω
—Ç–æ–≤–∞—Ä)
‚úÖ 6. –ù–∞–π—Ç–∏ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Ö –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è
‚úÖ 7. –ü–æ–¥—Å—á–∏—Ç–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä–æ–≤ —Å–æ–¥–µ—Ä–∂–∞—Ç –∏—Å–∫–æ–º–æ–µ —Å–ª–æ–≤–æ –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–∏
‚úÖ 8. –í—ã–≤–µ—Å—Ç–∏ –≤ –∫–æ–Ω—Å–æ–ª—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
üìå –ù–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∏—Å–∫–æ–º–æ–µ —Å–ª–æ–≤–æ –≤ —Ä–∞–∑–Ω–æ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ
(–Ω–∞–ø—Ä–∏–º–µ—Ä, iphone vs iPhone) ‚Äî —ç—Ç–æ –Ω—É–∂–Ω–æ —É—á–µ—Å—Ç—å
üîç –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ XPath –ª–æ–∫–∞—Ç–æ—Ä–∞–º:
üîπ –ü–æ–ª–µ –ø–æ–∏—Å–∫–∞:
üîπ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–æ–≤–∞—Ä–æ–≤ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã):
–ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ 2 –∏–ª–∏ –±–æ–ª—å—à–µ —Ç–æ–≤–∞—Ä–æ–≤, —Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω
–ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ –º–µ–Ω—å—à–µ 2, —Ç–µ—Å—Ç –Ω–µ –ø—Ä–æ–π–¥–µ–Ω
‚úÖ 9. –ó–∞–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ—Å—Ç–∞
//input[@type='search']üîπ –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞:
üîπ –û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞:
üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –∫–æ–¥–∞:
‚úÖ –ï—Å–ª–∏ –ø–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ –Ω–∞–π–¥–µ–Ω–æ 2 –∏–ª–∏ –±–æ–ª—å—à–µ —Ç–æ–≤–∞—Ä–æ–≤:
‚ùå –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ –º–µ–Ω—å—à–µ 2 —Ç–æ–≤–∞—Ä–æ–≤:
üìå –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è:
üîπ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏ –∑–∞–ø–∏—Å–∞—Ç—å –µ—ë –≤ —Ñ–∞–π–ª
(results.txt)
üîπ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –æ—à–∏–±–∫–∏: –µ—Å–ª–∏ —Å–∞–π—Ç –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è –∏–ª–∏ –ø–æ–∏—Å–∫ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Ç–µ—Å—Ç
–¥–æ–ª–∂–µ–Ω –≤—ã–≤–µ—Å—Ç–∏ "–û—à–∏–±–∫–∞" –∏ –Ω–µ –ø–∞–¥–∞—Ç—å
//div[@class='col-md-6 col-xl-4']
.//h3[@class='item-title']
.//div[@class='item-description']
–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞: –Ω–∞–π–¥–µ–Ω–æ 5 —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ 'iphone'.
–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ –ø—Ä–æ–π–¥–µ–Ω–∞."""


import time

from selenium import webdriver
from selenium.webdriver.chrome.options import Options
from selenium.webdriver.chrome.service import Service
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from webdriver_manager.chrome import ChromeDriverManager

chrome_options = Options()
chrome_options.add_argument("--start-maximized")
# chrome_options.add_argument("--headless")
chrome_options.add_argument("--disable-blink-features=AutomationControlled")

driver = webdriver.Chrome(service=Service(ChromeDriverManager().install()), options=chrome_options)
wait = WebDriverWait(driver, 10)

def wait_site():
    driver.get("https://www.datart.cz/")
    wait.until(EC.element_to_be_clickable((By.ID, "c-p-bn"))).click()
    time.sleep(5)
    wait.until(EC.element_to_be_clickable((By.XPATH, "//input[@name='q']"))).send_keys("iPhone")
    wait.until(EC.element_to_be_clickable((By.XPATH,
                                           "//button[@class='ufo-button ufo-button--secondary search-widget__input-submit']"))).click()
    wait.until(EC.presence_of_element_located((By.XPATH, "//div[@class='col-md-6 col-xl-4']")))
    return driver

def check_results(driver):
    items = driver.find_elements(By.XPATH, "//div[@class='col-md-6 col-xl-4']")
    if len(items) < 2:
        print("–û—à–∏–±–∫–∞: –ù–∞–π–¥–µ–Ω–æ –º–µ–Ω—å—à–µ 2 —Ç–æ–≤–∞—Ä–æ–≤.")
        driver.quit()
        return False
    return True

def count_items(driver):
    items = driver.find_elements(By.XPATH, "//div[@class='col-md-6 col-xl-4']")
    return len(items)

driver = wait_site()

if check_results(driver):
    print(f"–ù–∞–π–¥–µ–Ω–æ {count_items(driver)} —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ 'iPhone'.")
    with open("results.txt", "w") as file:
        file.write(str(count_items(driver)))
        print("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞–ø–∏—Å–∞–Ω–æ –≤ results.txt.")
        print("–¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω —É—Å–ø–µ—à–Ω–æ.")


driver.quit()

























# try:
#     driver.get("https://www.datart.cz/")
#     wait.until(EC.element_to_be_clickable((By.ID, "c-p-bn"))).click()
#     time.sleep(5)
#     wait.until(EC.element_to_be_clickable((By.XPATH, "//input[@name='q']"))).send_keys("iPhone")
#     wait.until(EC.element_to_be_clickable((By.XPATH,
#                                            "//button[@class='ufo-button ufo-button--secondary search-widget__input-submit']"))).click()
#     wait.until(EC.presence_of_element_located((By.XPATH, "//div[@class='col-md-6 col-xl-4']")))
#     print(f"–ù–∞–π–¥–µ–Ω–æ {count_items(driver)} —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ 'iPhone'.")
#     # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏ –∑–∞–ø–∏—Å–∞—Ç—å –µ—ë –≤ —Ñ–∞–π–ª
#     with open("results.txt", "w") as file:
#         file.write(str(count_items(driver)))
#         print("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞–ø–∏—Å–∞–Ω–æ –≤ results.txt.")
# except Exception as e:
#     print("–û—à–∏–±–∫–∞:", str(e))
#     driver.quit()







# driver.quit()


























